# 01_importar_datos.R
# Cargar paquetes
library(tidyverse)
library(lubridate)
library(scales)
# Listar todos los archivos .xlsx de la carpeta raw
archivos <- list.files("raw", pattern = "\\.xlsx$", full.names = TRUE)
# Leer y combinar todos los archivos
datos_subte <- archivos %>%
map_dfr(~ readxl::read_excel(.x))
# Vista rápida del resultado
glimpse(datos_subte)
# Guardar archivo unificado
write_csv(datos_subte, "input/datos_subte_completo.csv")
# Guardar archivo unificado
write_csv(datos_subte, "Input/datos_subte_completo.csv")
# Guardar archivo unificado
write_csv(datos_subte, "Input/datos_subte_completo.csv", row.names=FALSE)
# Vista rápida del resultado
glimpse(datos_subte)
# Listar todos los archivos .xlsx de la carpeta raw
archivos <- list.files("raw", pattern = "\\.xlsx$", full.names = TRUE)
instub <- 'Input'
outstub <- 'Output'
# 01_importar_datos.R
# Cargar paquetes
library(tidyverse)
library(lubridate)
library(scales)
# Listar todos los archivos .xlsx de la carpeta raw
archivos <- list.files("raw", pattern = "\\.xlsx$", full.names = TRUE)
# Leer y combinar todos los archivos
datos_subte <- archivos %>%
map_dfr(~ readxl::read_excel(.x))
instub <- 'Input'
outstub <- 'Output'
# Vista rápida del resultado
glimpse(datos_subte)
# Guardar archivo unificado
write_csv(datos_subte, "Input/datos_subte_completo.csv", row.names=FALSE)
# Guardar archivo unificado
write_csv(datos_subte, "Input/datos_subte_completo.csv")
dir.create("../Input")
# Desde scripts/01_importar_datos.R
library(tidyverse)
library(lubridate)
library(scales)
archivos <- list.files("../raw", pattern = "\\.xlsx$", full.names = TRUE)
datos_subte <- archivos %>%
map_dfr(~ readxl::read_excel(.x))
# Crear carpeta ../input si no existe
if (!dir.exists("../Input")) {
dir.create("../Input")
}
# Guardar archivo combinado en /input
write_csv(datos_subte, "../input/datos_subte_completo.csv")
# Desde scripts/01_importar_datos.R
library(tidyverse)
library(lubridate)
library(scales)
archivos <- list.files("../raw", pattern = "\\.xlsx$", full.names = TRUE)
print(getwd())                      # ¿Desde qué carpeta estás corriendo el script?
archivos <- list.files(
path    = "../raw",
pattern = "\\.(xlsx|xls)$",
full.names = TRUE
)
print(archivos)                     # Debe listar todos los .xlsx en ../raw
if (length(archivos) == 0) {
stop("No se encontraron archivos Excel en ../raw. Revisa la ruta y los nombres.")
}
# Desde scripts/01_importar_datos.R
library(tidyverse)
library(lubridate)
library(scales)
archivos <- list.files("../raw", pattern = "\\.xlsx$", full.names = TRUE)
print(getwd())                      # ¿Desde qué carpeta estás corriendo el script?
archivos <- list.files(
path    = "../Raw",
pattern = "\\.(xlsx|xls)$",
full.names = TRUE
)
print(archivos)                     # Debe listar todos los .xlsx en ../raw
if (length(archivos) == 0) {
stop("No se encontraron archivos Excel en ../raw. Revisa la ruta y los nombres.")
}
# Desde scripts/01_importar_datos.R
library(tidyverse)
library(lubridate)
library(scales)
archivos <- list.files("../Raw", pattern = "\\.xlsx$", full.names = TRUE)
print(getwd())                      # ¿Desde qué carpeta estás corriendo el script?
archivos <- list.files(
path    = "../Raw",
pattern = "\\.(xlsx|xls)$",
full.names = TRUE
)
print(archivos)                     # Debe listar todos los .xlsx en ../raw
if (length(archivos) == 0) {
stop("No se encontraron archivos Excel en ../raw. Revisa la ruta y los nombres.")
}
# Desde scripts/01_importar_datos.R
library(tidyverse)
library(lubridate)
library(scales)
archivos <- list.files("../Raw", pattern = "\\.xlsx$", full.names = TRUE)
print(getwd())                      # ¿Desde qué carpeta estás corriendo el script?
archivos <- list.files(
path    = "../Raw",
pattern = "\\.(xlsx|xls)$",
full.names = TRUE
)
print(archivos)                     # Debe listar todos los .xlsx en ../raw
if (length(archivos) == 0) {
stop("No se encontraron archivos Excel en ../Raw. Revisa la ruta y los nombres.")
}
